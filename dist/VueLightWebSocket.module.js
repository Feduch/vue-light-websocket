function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}var WebSocketClient=/*#__PURE__*/function(){function d(a,b){_classCallCheck(this,d),this.instance=null,this.isConnected=!1,this.url=a,this.options=b||this.defaultOptions(),this.options&&(this.reconnectEnabled=b.reconnectEnabled||!1,this.reconnectEnabled&&(this.reconnectInterval=b.reconnectInterval)),this.onOpen=null,this.onMessage=null,this.onClose=null,this.onError=null}return _createClass(d,[{key:"defaultOptions",value:function(){return{reconnectEnabled:!1,reconnectInterval:0}}},{key:"connect",value:function(d){var e=this,a="".concat(this.url,"?token=").concat(d);this.instance=new WebSocket(a),this.instance.onopen=function(){e.isConnected=!0,"function"==typeof e.onOpen&&e.onOpen()},this.instance.onmessage=function(b){"function"==typeof e.onMessage&&e.onMessage(b)},this.instance.onclose=function(b){e.isConnected=!1,"function"==typeof e.onClose&&e.onClose(b),e.reconnectEnabled&&e.reconnect()},this.instance.onerror=function(b){"function"==typeof e.onError&&e.onError(b)}}},{key:"disconnect",value:function(){try{this.instance.close()}catch(b){console.warn("".concat(b," ").concat(this.instance))}delete this.instance}},{key:"reconnect",value:function(){var b=this;try{this.instance.close()}catch(b){console.warn("".concat(b," ").concat(this.instance))}delete this.instance,setTimeout(function(){b.connect()},this.reconnectInterval)}},{key:"sendObj",value:function(b){this.instance.send(JSON.stringify(b))}},{key:"removeListeners",value:function(){this.onOpen=null,this.onMessage=null,this.onClose=null,this.onError=null}}]),d}(),Main={install:function(e,a){var b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},c=new WebSocketClient(a,b);b.connectManually||c.connect(),e.prototype.$socketClient=c}};export default Main;
//# sourceMappingURL=VueLightWebSocket.module.js.map
