{"version":3,"file":"VueSimpleWebSocket.js","sources":["../src/WebSocketClient.js","../src/Main.js"],"sourcesContent":["export default class WebSocketClient {\n  constructor (url, options) {\n    this.instance = null\n    this.url = url\n    this.options = options || this.defaultOptions()\n    if (this.options) {\n      this.reconnectEnabled = options.reconnectEnabled || false\n      if (this.reconnectEnabled) {\n        this.reconnectInterval = options.reconnectInterval\n      }\n    }\n    // These methods should be defined by components\n    this.onOpen = null\n    this.onMessage = null\n    this.onClose = null\n    this.onError = null\n  }\n\n  defaultOptions () {\n    return {\n      reconnectEnabled: false,\n      reconnectInterval: 0\n    }\n  }\n\n  connect () {\n    this.instance = new WebSocket(this.url)\n\n    // Socket event listeners\n    // Each event handler also calls the corresponding class method, which can be defined by the component\n    this.instance.onopen = () => {\n      if (typeof this.onOpen === 'function') {\n        this.onOpen()\n      }\n    }\n    this.instance.onmessage = (msg) => {\n      if (typeof this.onMessage === 'function') {\n        this.onMessage(msg)\n      }\n    }\n    this.instance.onclose = (evt) => {\n      if (typeof this.onClose === 'function') {\n        this.onClose(evt)\n      }\n      if (!evt.wasClean && this.reconnectEnabled) {\n        this.reconnect()\n      }\n    }\n    this.instance.onerror = (evt) => {\n      if (typeof this.onError === 'function') {\n        this.onError(evt)\n      }\n    }\n  }\n\n  reconnect () {\n    delete this.instance\n    setTimeout(() => {\n      this.connect()\n    }, this.reconnectInterval)\n  }\n\n  sendObj (data) {\n    this.instance.send(JSON.stringify(data))\n  }\n\n  removeListeners () {\n    this.onOpen = null\n    this.onMessage = null\n    this.onClose = null\n    this.onError = null\n  }\n}\n","import WebSocketClient from './WebSocketClient'\n\nexport default {\n\n  install (Vue, connection, options={}) {\n    const socketClient = new WebSocketClient(connection, options)\n    if (!options.connectManually) {\n      socketClient.connect()\n    }\n    Vue.prototype.$socketClient = socketClient\n  }\n\n}\n"],"names":["WebSocketClient","url","options","instance","defaultOptions","reconnectEnabled","reconnectInterval","onOpen","onMessage","onClose","onError","WebSocket","onopen","a","onmessage","msg","onclose","evt","wasClean","reconnect","onerror","setTimeout","connect","data","send","JSON","stringify","install","Vue","connection","socketClient","connectManually","prototype","$socketClient"],"mappings":"kZAAqBA,CAAAA,wCACnB,UAAA,CAAaC,CAAb,CAAkBC,CAAlB,CAA2B,yBACzB,KAAKC,QAAL,CAAgB,KAChB,KAAKF,GAAL,CAAWA,EACX,KAAKC,OAAL,CAAeA,CAAO,EAAI,KAAKE,cAAL,GACtB,KAAKF,OAAL,GACF,KAAKG,gBAAL,CAAwBH,CAAO,CAACG,gBAARH,IAAxB,CACI,KAAKG,gBAAL,GACF,KAAKC,iBAAL,CAAyBJ,CAAO,CAACI,iBAD/B,CAFF,EAOJ,KAAKC,MAAL,CAAc,KACd,KAAKC,SAAL,CAAiB,KACjB,KAAKC,OAAL,CAAe,KACf,KAAKC,OAAL,CAAe,kEAGC,CAChB,MAAO,CACLL,gBAAgB,GADX,CAELC,iBAAiB,CAAE,CAFd,mCAME,YACT,KAAKH,QAAL,CAAgB,GAAIQ,CAAAA,SAAJ,CAAc,KAAKV,GAAnB,CAAhB,CAIA,KAAKE,QAAL,CAAcS,MAAd,CAAuB,UAAM,CACA,kBAAhBC,CAAAA,CAAI,CAACN,MAAW,EACzBM,CAAI,CAACN,MAAL,EAPK,CACT,CASA,KAAKJ,QAAL,CAAcW,SAAd,CAA0B,SAACC,CAAD,CAAS,CACH,kBAAnBF,CAAAA,CAAI,CAACL,SAAc,EAC5BK,CAAI,CAACL,SAAL,CAAeO,CAAf,CAZK,CACT,CAcA,KAAKZ,QAAL,CAAca,OAAd,CAAwB,SAACC,CAAD,CAAS,CACH,kBAAjBJ,CAAAA,CAAI,CAACJ,OAAY,EAC1BI,CAAI,CAACJ,OAAL,CAAaQ,CAAb,CAD0B,CAGxB,CAACA,CAAG,CAACC,QAAL,EAAiBL,CAAI,CAACR,gBAAtB,EACFQ,CAAI,CAACM,SAAL,EApBK,CACT,CAsBA,KAAKhB,QAAL,CAAciB,OAAd,CAAwB,SAACH,CAAD,CAAS,CACH,kBAAjBJ,CAAAA,CAAI,CAACH,OAAY,EAC1BG,CAAI,CAACH,OAAL,CAAaO,CAAb,sCAKO,YACX,YAAYd,QAAZ,CACAkB,UAAU,CAAC,UAAM,CACfR,CAAI,CAACS,OAAL,EADQ,CAAA,CAEP,KAAKhB,iBAFE,kCAKHiB,EAAM,CACb,KAAKpB,QAAL,CAAcqB,IAAd,CAAmBC,IAAI,CAACC,SAALD,CAAeF,CAAfE,CAAnB,2CAGiB,CACjB,KAAKlB,MAAL,CAAc,IAAd,CACA,KAAKC,SAAL,CAAiB,IADjB,CAEA,KAAKC,OAAL,CAAe,IAFf,CAGA,KAAKC,OAAL,CAAe,mBCpEJ,CAEbiB,OAFa,UAEJC,EAAKC,EAAwB,IAAZ3B,CAAAA,CAAY,wDAAJ,GAC1B4B,CAAY,CAAG,GAAI9B,CAAAA,eAAJ,CAAoB6B,CAApB,CAAgC3B,CAAhC,EAChBA,CAAO,CAAC6B,eAAR7B,EACH4B,CAAY,CAACR,OAAbQ,EADG5B,CAGL0B,CAAG,CAACI,SAAJJ,CAAcK,aAAdL,CAA8BE,CAPnB,CAAA"}